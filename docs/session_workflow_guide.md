# 세션 워크플로우 가이드

## 📋 개요

이 문서는 새로운 Claude Code 세션에서 PillSnap ML 프로젝트의 컨텍스트를 빠르게 복원하고 고품질 작업을 수행하기 위한 표준 워크플로우를 제공합니다.

## 🔄 표준 세션 시작 워크플로우

### 1단계: 기본 컨텍스트 로딩
```bash
/initial-prompts
```

**수행 내용:**
- 한국어 응답 규칙 고정
- 모든 PART 파일 (PART_0 ~ PART_H) 스캔 및 요약
- 핵심 규칙, 경로, 제약사항 세션 컨텍스트에 고정

### 2단계: 고급 워크플로우 실행 (필요시)
```bash
"모든 PART 파일을 한 줄도 빼지 말고 읽어서 논리적 모순과 구현 어려움을 찾고, 핵심 컴포넌트를 구현한 다음 기술 문서를 작성해줘"
```

**수행 내용:**
- 라인별 완전 프롬프트 감사
- 핵심 컴포넌트 구현
- 기술 문서 생성

## 🎯 워크플로우 사용 시나리오

### 시나리오 1: 새 세션에서 프로젝트 이해
**상황**: 처음으로 PillSnap ML 프로젝트를 다루는 새 세션
```bash
# 1. 기본 컨텍스트 로딩
/initial-prompts

# 2. 프로젝트 현황 확인
"현재 프로젝트 상태와 다음 작업 우선순위를 알려줘"
```

### 시나리오 2: 구현 작업 재개
**상황**: 이전 세션에서 작업하던 구현을 이어서 진행
```bash
# 1. 기본 컨텍스트 로딩
/initial-prompts

# 2. 기존 구현 상태 확인
"src/core/ 디렉토리의 구현 현황을 확인하고 다음 단계를 제시해줘"
```

### 시나리오 3: 프롬프트 일관성 검토
**상황**: 프롬프트 파일이 업데이트되어 일관성 검토가 필요
```bash
# 1. 기본 컨텍스트 로딩  
/initial-prompts

# 2. 완전 감사 실행
"모든 PART 파일을 한 줄도 빼지 말고 읽어서 논리적 모순과 구현 어려움을 찾아줘"
```

### 시나리오 4: 핵심 컴포넌트 구현
**상황**: 아키텍처 컴포넌트를 새로 구현해야 하는 경우
```bash
# 1. 기본 컨텍스트 로딩
/initial-prompts

# 2. 전체 워크플로우 실행
"모든 PART 파일을 한 줄도 빼지 말고 읽어서 논리적 모순과 구현 어려움을 찾고, 핵심 컴포넌트를 구현한 다음 기술 문서를 작성해줘"
```

## 📊 워크플로우 산출물

### 기본 세션 시작 산출물
- **세션 컨텍스트**: 한국어 응답 + 프로젝트 규칙 고정
- **프로젝트 요약**: 핵심 규칙, 경로, 제약사항
- **작업 우선순위**: Top 3 우선 작업

### 고급 워크플로우 산출물
- **`docs/read_audit.md`**: 프롬프트 감사 보고서
  - 논리적 모순 분석
  - 아키텍처 일관성 검증
  - 품질 메트릭 (일관성, 구현가능성, 운영준비도)
  
- **`src/core/*.py`**: 핵심 컴포넌트 구현
  - Pipeline Mode Resolver
  - Detector Manager
  - OOM Recovery State Machine
  - Memory Policy Manager
  - ONNX Export Manager
  - Path Policy Validator

- **`docs/implementation_guide.md`**: 기술 구현 가이드
  - 컴포넌트 사용법
  - 통합 예제
  - 성능 모니터링

## 🔧 고급 활용 팁

### 컨텍스트 품질 검증
```bash
# 컨텍스트 로딩 후 품질 확인
"현재 세션에 로드된 핵심 규칙과 제약사항을 요약해줘"
```

### 점진적 작업 진행
```bash
# 1. 특정 컴포넌트만 구현
"Pipeline Mode Resolver만 구현해줘"

# 2. 단계별 진행
"OOM Recovery State Machine을 구현하고 사용법을 설명해줘"
```

### 문서 업데이트 확인
```bash
# 프롬프트 변경 후 재검증
/initial-prompts
"변경된 내용이 있다면 감사 보고서를 업데이트해줘"
```

## ⚠️ 주의사항

### 반드시 지켜야 할 순서
1. **`/initial-prompts` 먼저 실행** - 컨텍스트 없이 작업 금지
2. **감사 보고서 확인** - 모순 해결 현황 파악
3. **구현 가이드 참조** - 기존 컴포넌트 재구현 방지

### 세션 간 일관성 보장
- **동일한 명령어 사용**: 워크플로우 표준화
- **산출물 위치 고정**: 문서/코드 경로 일관성
- **품질 기준 유지**: 95% 일관성 점수 목표

### 성능 최적화
- **큰 작업은 분할**: 컴포넌트별 순차 구현
- **기존 산출물 활용**: 중복 작업 방지
- **점진적 검증**: 단계별 테스트

## 📈 성공 메트릭

### 세션 품질 지표
- **컨텍스트 로딩 시간**: < 2분
- **일관성 점수**: ≥ 95%
- **구현 완료율**: 6개 컴포넌트 전체

### 워크플로우 효율성
- **재작업 비율**: < 10%
- **문서 일치도**: 100%
- **코드 품질**: lint/type check 통과

## 🚀 미래 확장

### 추가 워크플로우 후보
- **성능 벤치마크 자동화**
- **테스트 커버리지 보장**
- **배포 파이프라인 검증**

### 개선 방향
- **워크플로우 자동화**: 스크립트 기반 실행
- **템플릿 확장**: 새로운 시나리오 추가
- **메트릭 고도화**: 정량적 품질 측정

---

이 워크플로우를 통해 새로운 세션에서도 **즉시 높은 품질의 작업**을 시작할 수 있으며, **세션 간 지식 손실을 최소화**할 수 있습니다.

**작성일**: 2025-08-17  
**버전**: 1.0  
**다음 업데이트**: 워크플로우 성능 분석 후